SELECT COUNT(DISTINCT r.trip_id) AS n
FROM ride_points r
WHERE (ST_Within(ST_SetSRID(ST_Point(r.x, r.y), 4326), ST_GeomFromText('POLYGON((13.3 52.45, 13.5 52.45, 13.5 52.58, 13.3 52.58, 13.3 52.45))', 4326)) AND NOT (r.t BETWEEN '2022-10-04T12:00:00Z' AND '2022-10-04T13:00:00Z'));
